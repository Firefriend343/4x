<html>
  <head>
    <title> 4x Random System Generator </title>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
  
    <style>
      body { background:#030a17; }
      img { image-rendering:pixelated; }
      #system1 { position:absolute; width:0px; height:0px; top:0px; left:0px; }
    
      .planet { position:absolute; width:50px; height:50px; background:gray; border-radius:50%; transition:0.5s; }
      .star { position:absolute; width:80px; height:80px; background:white; border-radius:50%; transition:0.5s; }
      
      #s1 { top:300px; left:420px; }
      #p1 { }
      #p2 { }
      #p3 { }
      #p4 { }
      #p5 { }
      #p6 { }
      
      .info-box {
        position:fixed;
        width: 170px;
        height: 300px;
        top:100px;
        left:1000px;
        font-family: 'MedievalSharp', cursive; 
        font-size:80%;
        border: 2px solid lightgray;
        border-radius: 5px;
        display: none;
        margin: 15px;
        grid-template-columns: repeat(3, 1fr);
        grid-auto-rows: 2px 58px 60px 120px 50px 10px;
        grid-template-areas:
          "top   top   top"
          "name  name  sprite"
          "habit habit cost"
          "desc  desc  desc"
          "pop   pop   pop"
          "bottom bottom bottom";
        gap: 1.75px;
        background: #1d4b96;
        transition:0.4s;
      }
      #info-box { display:none; }
      
      .cell { background: lightgray; padding: 3px; position: relative; overflow:hidden; font-size:80%; background:#7096cf; }
      .cell p { font-family: 'MedievalSharp', cursive; font-size:90%; }
      .cell span { font-family: 'MedievalSharp', cursive; font-size:90%; }
      .name { grid-area: name; text-align:center; }
      .name span { font-size:140%; }
      .sprite { grid-area:sprite; }
      .habit { grid-area:habit; text-align:center; }
      .cost { grid-area: cost; text-align:center; }
      .desc { grid-area: desc; text-align:center; font-size:85%; }
      .pop { grid-area: pop; text-align:center; }
      .top { grid-area: top; gap:0px; display:none; }
      .bottom { grid-area: bottom; gap:0px; display:none; }
    </style>
    
  </head>
  
  <body>
  
     <div class="info-box" id="info-box" onclick="hide(this)">
      <div class="cell top"></div>
      <div class="cell name"><span class="name" id="surveyName"> [variable] </span></div>
      <div class="cell sprite"><img class="cell" id="surveyImage"></img></div>
      <div class="cell habit"><p id="surveyHabit"> [% Habitability] </p></div>
      <div class="cell cost"><span id="surveyCost"> # </span><span> Credits in Upkeep Cost </span></div>
      <div class="cell desc"><p id="surveyDesc"> [desc] </p></div>
      <div class="cell pop"><p> This planet contains <span id="surveyPop"> 0 </span> Population Units. </p></div>
      <div class="cell bottom"></div>
    </div>
    
    <img class="star" id="s1" src="orangestar1.png"></img>  
    <div id="system1">
      <img class="planet" id="p1"></img>
      <img class="planet" id="p2"></img>
      <img class="planet" id="p3"></img>
      <img class="planet" id="p4"></img>
      <img class="planet" id="p5"></img>
      <img class="planet" id="p6"></img>
    </div>
  
    <script>
      //global variables
      
      function $ (id) {
        return document.getElementById(id);
      }
      function $$ (sel) {
        return document.querySelectorAll(sel);
      }
      
      function survey(ev) {
        let el = ev.target;
        console.log(el.biome);
        var infoBox = $("info-box");
        infoBox.style.display = "inline-grid";
        
        var biome = el.biome;
        var survey = {
          desert: { surveyName: "Desert World", surveyImage: "desertplanet1.png", surveyCost: "10" }, 
          savanna: { surveyName: "Savanna World", surveyImage: "savannaplanet1.png", surveyCost: "10" },
          arctic: { surveyName: "Arctic World", surveyImage: "arcticplanet1.png", surveyCost: "10" },
          tundra: { surveyName: "Tundra World", surveyImage: "tundraplanet1.png", surveyCost: "10" },
          continental: { surveyName: "Continental World", surveyImage: "continentalplanet1.png", surveyCost: "10" },
          ocean: { surveyName: "Ocean World", surveyImage: "oceanplanet1.png", surveyCost: "10" },
          relic: { surveyName: "Relic World", surveyImage: "relicplanet1.png", surveyCost: "15" },
          mineral1: { surveyName: "Rocky World", surveyImage: "mineralplanet1.png", surveyCost: "6" },
          mineral2: { surveyName: "Volcanic World", surveyImage: "mineralplanet2.png", surveyCost: "6" },
          mineral3: { surveyName: "Ringed World", surveyImage: "mineralplanet3.png", surveyCost: "6" },
          barren: { surveyName: "Barren", surveyImage: "barrenplanet1.png", surveyCost: "N/A" }
        }
        $("surveyName").innerText = survey[el.biome].surveyName;
        $("surveyImage").src = survey[el.biome].surveyImage;
        $("surveyCost").innerText = survey[el.biome].surveyCost;
      }
      
      //system generation
      
      function generateImgs() {
        var allImgs = [["desertplanet1.png", "desert"],
                       ["savannaplanet1.png", "savanna"],
                       ["arcticplanet1.png", "arctic"],
                       ["tundraplanet1.png", "tundra"],
                       ["continentalplanet1.png", "continental"], 
                       ["oceanplanet1.png", "ocean"],
                       ["relicplanet1.png", "relic"],
                       ["mineralplanet1.png", "mineral1"],
                       ["mineralplanet2.png", "mineral2"],
                       ["mineralplanet2.png", "mineral2"],
                       ["mineralplanet3.png", "mineral3"],
                       ["mineralplanet3.png", "mineral3"],
                       ["barrenplanet1.png", "barren"],
                       ["barrenplanet1.png", "barren"]];
        var planetElList = $$('#system1 .planet');
        for (const pEl of planetElList) {
          var randomIndex = Math.floor(Math.random() * allImgs.length);
          pEl.src = allImgs[randomIndex][0];
          pEl.biome =  allImgs[randomIndex][1];
          pEl.addEventListener("click", survey);
        }
      }
      function generatePosition() {
        var allPositions =   [["133px","185px"],
                              ["225px","571px"],
                              ["65px" ,"380px"],
                              ["415px","210px"],
                              ["347px","715px"],
                              ["126px","515px"],
                              ["122px","717px"],
                              ["417px","813px"],
                              ["488px","430px"],
                              ["214px","315px"],
                              ["412px","584px"],
                              ["587px","453px"]];
        var planetElList = $$('#system1 .planet');
        var curPlanetIndex = 0;
        var numPlanets = Math.floor(Math.random() * 6) + 1;
        for (const pEl of planetElList) {
          var randomIndex = Math.floor(Math.random() * allPositions.length);
          var planetPosition = allPositions[randomIndex];
          pEl.style.top = planetPosition[0];
          pEl.style.left = planetPosition[1];
          let removed = allPositions.splice(randomIndex, 1);
          curPlanetIndex++;
          if (curPlanetIndex > numPlanets) {
            pEl.parentNode.removeChild(pEl);
          }
        }
      }
      
      function hide(el) {
        el.style.display = "none";
      }
      
      //Instant Functions
      generateImgs();
      generatePosition();
    </script>
  </body>
</html>
<!--Version 0.38--->
