<html>
  <head>
    <title> 4x Random System Generator </title>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
  
    <style>
      body { background:#030a17; }
      img { image-rendering:pixelated; }
      #system1 { position:absolute; width:0px; height:0px; top:0px; left:0px; }
    
      .planet { position:absolute; width:50px; height:50px; background:gray; border-radius:50%; transition:0.5s; }
      .star { position:absolute; width:80px; height:80px; background:white; border-radius:50%; transition:0.5s; }
      
      #s1 { top:300px; left:420px; }
      #p1 { }
      #p2 { }
      #p3 { }
      #p4 { }
      #p5 { }
      #p6 { }
      
      .info-box { position:fixed; width: 190px; height: 300px; top:100px;left:1050px;font-family: 'MedievalSharp', cursive; 
        font-size:80%; border: 2px solid lightgray; border-radius: 5px; display: none; margin: 15px;
        grid-template-columns: repeat(3, 1fr); grid-auto-rows: 2px 58px 60px 120px 50px 10px;
        grid-template-areas:
          "top   top   top"
          "name  name  sprite"
          "cost  size  habit"
          "desc  desc  desc"
          "pop   pop   pop"
          "bottom bottom bottom";
        gap: 1.75px; background: #1d4b96;transition:0.4s;
      }
      #info-box { display:none; }
      
      .cell { background: lightgray; padding: 3px; position: relative; overflow:hidden; font-size:80%; background:#7096cf; }
      .cell p { font-family: 'MedievalSharp', cursive; font-size:90%; }
      .cell span { font-family: 'MedievalSharp', cursive; font-size:90%; }
      .name { grid-area: name; text-align:center; }
      .name span { font-size:140%; }
      .sprite { grid-area:sprite; }
      .cost { grid-area: cost; text-align:center; }
      .cost span { font-size:90%; }
      .size { grid-area:size; text-align:center }
      .size span { font-size:90%; }
      .habit { grid-area:habit; text-align:center; }
      .habit span { font-size:90%; }
      .desc { grid-area: desc; text-align:center; font-size:90%; }
      .pop { grid-area: pop; text-align:center; }
      .pop span { font-size:120% }
      .top { grid-area: top; gap:0px; display:none; }
      .bottom { grid-area: bottom; gap:0px; display:none; }
      #surveyImage { background:grey; border-radius:50%; }
      
      .HUD { position:fixed; top:0px; left:0px; height:50px; width:100%; background:#7096cf; border:2px solid lightgray;
        display:inline-grid;
        grid-template-columns: 20px 50px 70px 40px 50px 70px 40px 50px 70px 40px 50px 70px auto;
        grid-auto-rows:10px 30px 10px;
        grid-template-areas:
          "top     top         top           top     top        top          top     top           top             top     top        top          top"
          "margin1 mineralIcon mineralNumber margin2 creditIcon creditNumber margin3 authorityIcon authorityNumber margin4 supplyIcon supplyNumber margin5"
          "bottom  bottom      bottom        bottom  bottom     bottom       bottom  bottom        bottom          bottom  bottom     bottom       bottom";
        gap:0px;
        transition:0.4s
      }
      .HUDtop { grid-area:top; background:#1d4b96; }
      .HUDbottom { grid-area:bottom; background:#1d4b96; }
      .HUDcell { position:relative; padding:3px; overflow:hidden; font-family: 'MedievalSharp', cursive; }
      .HUDcell p { overflow:hidden; font-size:80%; font-family: 'MedievalSharp', cursive; }
      .HUDcell span { overflow:hidden; font-size:80%; }
      .margin1 { grid-area:margin1; }
      .margin2 { grid-area:margin2; }
      .margin3 { grid-area:margin3; }
      .margin4 { grid-area:margin4; }
      .margin5 { grid-area:margin4; }
      .mineralIcon { grid-area:mineralIcon; }
      .creditIcon { grid-area:creditIcon; }
      .authorityIcon { grid-area:authorityIcon; }
      .supplyIcon { grid-area:supplyIcon; }
      .mineralNumber { grid-area:mineralNumber; padding:7px; }
      .creditNumber { grid-area:creditNumber; padding:7px; }
      .authorityNumber { grid-area:authorityNumber; padding:7px; }
      .supplyNumber { grid-area:supplyNumber; padding:7px; }
      #HUDMineralIcon { image-rendering:pixelated; position:relative; height:25px; width:25px;}
      #HUDCreditIcon { image-rendering:pixelated; position:relative; height:25px; width:25px; }
      #HUDAuthorityIcon { image-rendering:pixelated; position:relative; height:25px; width:25px; }
      #HUDSupplyIcon { image-rendering:pixelated; position:relative; height:25px; width:25px; }
      
      .planetMenu { position:absolute; top:20px; left:20px; width: 180px; height: 140px; font-family: 'MedievalSharp', cursive; 
        font-size:80%; border: 2px solid lightgray; border-radius: 5px; display: none; margin: 15px;
        grid-template-columns: repeat(3, 1fr); grid-auto-rows: auto;
        grid-template-areas:
          "menuButton1  menuButton1  menuSurveyIcon"
          "menuButton2  menuButton2  menuMineralIcon"
          "menuButton3  menuButton3  menuCreditIcon";
        gap: 1.75px; background: #1d4b96; transition:0.4s;
      }
      
      .menuCell { background: lightgray; padding: 3px; position: relative; overflow:hidden; background:#7096cf; }
      .menuCell p { font-family: 'MedievalSharp', cursive; font-size:110%; }
      .menuTop { grid-area:menuTop; display:none; }
      .menuBottom { grid-area:menuBottom; display:none; }
      .menuButton1 { grid-area:menuButton1; }
      .menuButton2 { grid-area:menuButton2; }
      .menuButton3 { grid-area:menuButton3; }
      .menuSurveyIcon { grid-area:menuSurveyIcon; }
      .menuMineralIcon { grid-area:menuMineralIcon; }
      .menuCreditIcon { grid-area:menuCreditIcon; }
      #planetMenu {  }
      #menuSurveyIcon { image-rendering:pixelated; position:relative; height:25px; width:25px; }
      #menuMineralIcon { image-rendering:pixelated; position:relative; height:25px; width:25px; }
      #menuCreditIcon { image-rendering:pixelated; position:relative; height:25px; width:25px; }
      #menuButton1 { border-radius:20%; background:navy; color:white; font-family:'MedievalSharp', cursive; width:110px; margin:1px; font-size:80%; }
      #menuButton2 { border-radius:20%; background:navy; color:white; font-family:'MedievalSharp', cursive; width:110px; margin:1px; font-size:80%; }
      #menuButton3 { border-radius:20%; background:navy; color:white; font-family:'MedievalSharp', cursive; width:110px; margin:1px; font-size:80%; }
      
      .colonyMarkerCloner { display:none; }
      .colonyMarker { position:absolute; height:15px; width:15px; image-rendering:pixelated; background:gray; border-radius:50%; display:none; }
      #passiveColonyMarker {  }
      #neutralColonyMarker {  }
      #hostileColonyMarker {  }
      
    </style>
    
  </head>
  
  <body>
    <div class="HUD">
      <div class="HUDcell HUDtop"></div>
      <div class="HUDcell margin1"></div>
      <div class="HUDcell mineralIcon"><img id="HUDMineralIcon" src="gemstoneicon.png"></img></div>
      <div class="HUDcell mineralNumber"><span id="HUDMineralNumber"> 200 </span></div>
      <div class="HUDcell margin2"></div>
      <div class="HUDcell creditIcon"><img id="HUDCreditIcon" src="crediticon.png"></img></div>
      <div class="HUDcell creditNumber"><span id="HUDCreditNumber"> 200 </span></div>
      <div class="HUDcell margin3"></div>
      <div class="HUDcell authorityIcon"><img id="HUDAuthorityIcon" src="authorityicon.png"></img></div>
      <div class="HUDcell authorityNumber"><span id="HUDAuthorityNumber"> 100 </span></div>
      <div class="HUDcell margin4"></div>
      <div class="HUDcell supplyIcon"><img id="HUDSupplyIcon" src="supplyicon.png"></img></div>
      <div class="HUDcell supplyNumber"><span id="HUDSupplyNumber"> 200 </span></div>
      <div class="HUDcell HUDbottom"></div>
    </div>
    
    <div class="colonyMarkerCloner">
      <img class="colonyMarker" id="passiveColonyMarker" src="passivecolony.png" onclick="surveyColony(this)"></img>
      <img class="colonyMarker" id="neutralColonyMarker" src="neutralcolony.png"></img>
      <img class="colonyMarker" id="hostileColonyMarker" src="hostilecolony.png"></img>
    </div>

     <div class="info-box" id="info-box" onclick="hide(this)">
      <div class="cell top"></div>
      <div class="cell name"><span class="name" id="surveyName"> [variable] </span></div>
      <div class="cell sprite"><img class="cell" id="surveyImage"></img></div>
      <div class="cell cost"><span id="surveyCost"> # </span><span> Credits in Upkeep Cost </span></div>
      <div class="cell size"><p id="surveySize"> [Size] </p></div>
      <div class="cell habit"><p id="surveyHabit"> [% Habitability] </p></div>
      <div class="cell desc"><p id="surveyDesc"> [desc] </p></div>
      <div class="cell pop"><span> This planet contains </span><span id="surveyPop"> 0 </span><span> Population Units. </span></div>
      <div class="cell bottom"></div>
    </div>
    
    <img class="star" id="s1" src="orangestar1.png"></img>  
    <div id="system1">
      <img class="planet" id="p1"></img>
      <img class="planet" id="p2"></img>
      <img class="planet" id="p3"></img>
      <img class="planet" id="p4"></img>
      <img class="planet" id="p5"></img>
      <img class="planet" id="p6"></img>
    </div>

    <div class="planetMenu" id="planetMenu">
      <div class="menuCell menuButton1"><button id="menuButton1" onclick="survey()"> Survey System </button></div>
      <div class="menuCell menuSurveyIcon"><img id="menuSurveyIcon" src="surveyicon.png"></img></div>
      <div class="menuCell menuButton2"><button id="menuButton2" onclick="buildMiningStation()"> Build Mining Station </button></div>
      <div class="menuCell menuMineralIcon"><img id="menuMineralIcon" src="gemstoneicon.png"></img></div>
      <div class="menuCell menuButton3"><button id="menuButton3" onclick="buildColony()"> Build Colony </button></div>
      <div class="menuCell menuCreditIcon"><img id="menuCreditIcon" src="crediticon.png"></img></div>
    </div>

    <script>
      //global variables
      var lastSelectedPlanet = null;
      
      function $ (id) {
        return document.getElementById(id);
      }
      function $$ (sel) {
        return document.querySelectorAll(sel);
      }
      
      function selectPlanet(ev) {
        let el = ev.target;
        lastSelectedPlanet = el.id;
        el.style.background = "lime";
        el.style.padding = "1.5px";
        var planetMenu = $("planetMenu");
        planetMenu.style.display = "inline-grid";
        var newTop = el.offsetTop - 10;
        planetMenu.style.top = newTop + "px";
        var newLeft = el.offsetLeft + 70;
        planetMenu.style.left = newLeft + "px";
      }
      function preunselectPlanet(ev) {
        setTimeout(function(){
          unselectPlanet(ev);
        },2200);
      }
      function unselectPlanet(ev) {
        let el = ev.target;
        lastSelectedPlanet = null;
        el.style.background = "gray";
        el.style.padding = "0px";
        var planetMenu = $("planetMenu");
        planetMenu.style.display = "none";
      }
      
      function survey() {
        let el = $(lastSelectedPlanet);
        console.log(el.biome);
        var infoBox = $("info-box");
        infoBox.style.display = "inline-grid";
        
        var biome = el.biome;
        var survey = {
          desert: { surveyName: "Desert World", surveyImage: "desertplanet1.png", surveyCost: "10", surveySize:"TBD",
                   surveyHabit: "TBD", surveyDesc: "Your scans of the planet show nothing but endless seas of dunes dotted with cacti and oases."}, 
          savanna: { surveyName: "Savanna World", surveyImage: "savannaplanet1.png", surveyCost: "10", surveySize:"TBD", 
                    surveyHabit: "TBD", surveyDesc: "The grasslands of this planet stretch to the horizon, dotted with trees, caves, hills, and small oceans." },
          arctic: { surveyName: "Arctic World", surveyImage: "arcticplanet1.png", surveyCost: "10", surveySize:"TBD", 
                   surveyHabit: "TBD", surveyDesc: "This planet is a barren, freezing, thick floe of ice. It may have once been an Ocean World." },
          tundra: { surveyName: "Tundra World", surveyImage: "tundraplanet1.png", surveyCost: "10", surveySize:"TBD", 
                   surveyHabit: "TBD", surveyDesc: "What was probably once a rolling green-hilled planet has been frozen to its core." },
          continental: { surveyName: "Continental World", surveyImage: "continentalplanet1.png", surveyCost: "10", surveySize:"TBD", 
                        surveyHabit: "TBD", surveyDesc: "The hills and valleys of this planet are a brilliant, verdant green when in bloom." },
          ocean: { surveyName: "Ocean World", surveyImage: "oceanplanet1.png", surveyCost: "10", surveySize:"TBD", 
                  surveyHabit: "TBD", surveyDesc: "This planet is entirely a massive ocean, bound to a small rock core by a strong magnetic field." },
          relic: { surveyName: "Relic World", surveyImage: "relicplanet1.png", surveyCost: "15", surveySize:"TBD", 
                  surveyHabit: "70% Habitable", surveyDesc: "An ancient civilization inhabited this planet, leaving the endless ruins of massive cities behind." },
          mineral1: { surveyName: "Rocky World", surveyImage: "mineralplanet1.png", surveyCost: "6", surveySize:"TBD", 
                     surveyHabit: "Unhabitable", surveyDesc: "This planet is hot and grim, but relatively rich in minerals." },
          mineral2: { surveyName: "Volcanic World", surveyImage: "mineralplanet2.png", surveyCost: "6", surveySize:"TBD", 
                     surveyHabit: "Unhabitable", surveyDesc: "There are no hills nor valleys on this planet, only massive lava-filled crevices." },
          mineral3: { surveyName: "Ringed World", surveyImage: "mineralplanet3.png", surveyCost: "6", surveySize:"TBD", 
                     surveyHabit: "Unhabitable", surveyDesc: "A moderately sized gas giant with a small assortment of rings rich in minerals." },
          barren: { surveyName: "Barren", surveyImage: "barrenplanet1.png", surveyCost: "N/A", surveySize:"TBD", 
                   surveyHabit: "Unhabitable", surveyDesc: "Scanning the planet shows nothing of importance, as it lacks decently sized deposits of resources." },
          junk: { surveyName: "Junk World", surveyImage: "junkplanet1.png", surveyCost: "N/A", surveySize:"TBD", 
                     surveyHabit: "Unhabitable", surveyDesc: "This planet was once used as a gargantuan junkyard, piled miles high with ruins." },
          gas: { surveyName: "Gas Giant", surveyImage: "gasplanet1.png", surveyCost: "N/A", surveySize:"TBD", 
                     surveyHabit: "Unhabitable", surveyDesc: "Small asteriods drift through this gas giant's atmosphere, stuck in an endless orbit." }
        }
        $("surveyName").innerText = survey[el.biome].surveyName;
        $("surveyImage").src = survey[el.biome].surveyImage;
        $("surveySize").innerText = survey[el.biome].surveySize;
        $("surveyCost").innerText = survey[el.biome].surveyCost;
        $("surveyHabit").innerText = survey[el.biome].surveyHabit;
        const uninhabitablePlanets = ["mineral1", "mineral2", "mineral3", "barren", "junk", "gas"];
        const habitablePlanets = ["desert", "savanna", "arctic", "tundra", "continental", "ocean", "relic"];
        if (uninhabitablePlanets.includes(el.biome)) {
          $("surveyDesc").innerText = survey[el.biome].surveyDesc + " This planet is not suitable for life.";
        }
        else if (habitablePlanets.includes(el.biome)) {
          $("surveyDesc").innerText = survey[el.biome].surveyDesc + " This planet is suitable for life.";
        }
        else {
          $("surveyDesc").innerText = survey[el.biome].surveyDesc;
          alert ("Unidentified planet")
        }
      }
      function buildMiningStation() {
        alert("you built a mining station - This function has not been added yet");
        var newMineralNumber = Number(HUDMineralNumber.innerText) - 40;
        HUDMineralNumber.innerText = newMineralNumber;
        var newCreditNumber = Number(HUDCreditNumber.innerText) - 100;
        HUDCreditNumber.innerText = newCreditNumber;
      }
      function buildColony() {
        alert("you built a colony - This function is still in development");
        var newMineralNumber = Number(HUDMineralNumber.innerText) - 20;
        HUDMineralNumber.innerText = newMineralNumber;
        var newCreditNumber = Number(HUDCreditNumber.innerText) - 40;
        HUDCreditNumber.innerText = newCreditNumber;
        var newSupplyNumber = Number(HUDSupplyNumber.innerText) - 100;
        HUDSupplyNumber.innerText = newSupplyNumber;
        var newPopulationNumber = Number(surveyPop.innerText) + 2;
        surveyPop.innerText = newPopulationNumber;
        var system = $("system1");
        var el = $(lastSelectedPlanet);
        var colonyMarker = $("passiveColonyMarker");
        var newTop = el.offsetTop - 10;
        var newLeft = el.offsetLeft + 55;
        colonyMarker.style.top = newTop + "px";
        colonyMarker.style.left = newLeft + "px";
        var newMarker = colonyMarker.cloneNode(true);
        newMarker.id = newMarker.id + "-" + el.id;
        system.appendChild(newMarker);
        newMarker.style.display = "block";
      }
      function surveyColony(el) {
        var planet = el.id - "passiveColonyMarker-";
        console.log (planet)
      }
      
      //system generation
      
      function generateImgs() {
        var allImgs = [["desertplanet1.png", "desert"],
                       ["savannaplanet1.png", "savanna"],
                       ["arcticplanet1.png", "arctic"],
                       ["tundraplanet1.png", "tundra"],
                       ["continentalplanet1.png", "continental"], 
                       ["oceanplanet1.png", "ocean"],
                       ["relicplanet1.png", "relic"],
                       ["mineralplanet1.png", "mineral1"],
                       ["mineralplanet2.png", "mineral2"],
                       ["mineralplanet2.png", "mineral2"],
                       ["mineralplanet3.png", "mineral3"],
                       ["mineralplanet3.png", "mineral3"],
                       ["barrenplanet1.png", "barren"],
                       ["barrenplanet1.png", "barren"],
                       ["barrenplanet1.png", "barren"],
                       ["gasplanet1.png",    "gas"],
                       ["gasplanet1.png",    "gas"],
                       ["junkplanet1.png",   "junk"]];
        var planetElList = $$('#system1 .planet');
        for (const pEl of planetElList) {
          var randomIndex = Math.floor(Math.random() * allImgs.length);
          pEl.src = allImgs[randomIndex][0];
          pEl.biome =  allImgs[randomIndex][1];
          pEl.addEventListener("mouseenter", selectPlanet);
          pEl.addEventListener("mouseout", preunselectPlanet);
        }
      }
      function generatePosition() {
        var allPositions =   [["133px","185px"],
                              ["225px","571px"],
                              ["85px" ,"380px"],
                              ["415px","210px"],
                              ["347px","715px"],
                              ["126px","515px"],
                              ["122px","717px"],
                              ["417px","813px"],
                              ["488px","430px"],
                              ["214px","315px"],
                              ["412px","584px"],
                              ["587px","453px"]];
        var planetElList = $$('#system1 .planet');
        var curPlanetIndex = 0;
        var numPlanets = Math.floor(Math.random() * 6) + 1;
        for (const pEl of planetElList) {
          var randomIndex = Math.floor(Math.random() * allPositions.length);
          var planetPosition = allPositions[randomIndex];
          pEl.style.top = planetPosition[0];
          pEl.style.left = planetPosition[1];
          let removed = allPositions.splice(randomIndex, 1);
          curPlanetIndex++;
          if (curPlanetIndex > numPlanets) {
            pEl.parentNode.removeChild(pEl);
          }
        }
      }
      
      function hide(el) {
        el.style.display = "none";
      }
      function remove(el) {
        el.parentNode.removeChild(el);
      }
      
      //Instant Functions
      generateImgs();
      generatePosition();
    </script>
  </body>
</html>
<!--Version 0.89--->
